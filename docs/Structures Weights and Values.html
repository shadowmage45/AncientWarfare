<html>
<head>
<title>Ancient Warfare Wiki - Structures Weights and Values</title>
<link rel="stylesheet" href="static/style.css" type="text/css" />
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
</head>
<body>
<div class="header">
<div class="headerSwoop">
<div class="headerInner">
<table class="WikiLogoTable WikiElement">
<tbody>
<tr>
<td><a href="home.html"><img src="static/i/logo-shadow-40.png" alt="" width="40" height="40"></img></a></td>
<td class="WikiLogoName"><a href="home.html">Ancient Warfare</a></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="wikiBody">
<div class="sidebar">
<div class="actions">
<ul class="WikiActions WikiElement WikiControls">
<li id="WikiActionHome">
<div>
<span class="WikiActionSupplemental" style="float:right;"></span>
<a href="home.html"><i class="icon-home ws-icon-fixed"></i></a>
<a href="home.html">Wiki Home</a>
</div>
</li>
<li id="WikiActionChanges">
<div>
<span class="WikiActionSupplemental" style="float:right;"></span>
<i class="icon-time ws-icon-fixed"></i>
<s><a href="">Recent Changes</a></s>
</div>
</li>
<li id="WikiActionPagesAndFiles">
<div>
<span class="WikiActionSupplemental" style="float:right;"></span>
<i class="icon-file-text-alt ws-icon-fixed"></i>
<s><a href="">Pages and Files</a></s>
</div>
</li>
<li id="WikiActionMembers">
<div>
<span class="WikiActionSupplemental" style="float:right;"></span>
<i class="icon-user ws-icon-fixed"></i>
<s><a href="">Members</a></s>
</div>
</li>
</ul>
<form class="WikiSearch WikiElement">
<input class="WikiSearchInput" type="text" placeholder="Search (Disabled)" disabled></input>
</form>
</div>
<ul class="sidenav">
<li>
<details>
<summary>General Info</summary>
<ul>
<li><a href="home.html">home</a></li>
<li><a href="Mod Overview.html">Mod Overview</a></li>
<li><a href="Getting Started.html">Getting Started</a></li>
<li><a href="Downloads and Instructions.html">Downloads and Instructions</a></li>
<li><a href="Change Log.html">Change Log</a></li>
<li><a href="Future Plans.html">Future Plans</a></li>
</ul>
</details>
</li>
<li>
<details>
<summary>Crafting</summary>
<ul>
<li><a href="Crafting Overview.html">Crafting Overview</a></li>
</ul>
</details>
</li>
<li>
<details>
<summary>Research</summary>
<ul>
<li><a href="Research Overview.html">Research Overview</a></li>
<li><a href="Research Goal List.html">Research Goal List</a></li>
<li><a href="Research Goal Tree.html">Research Goal Tree</a></li>
</ul>
</details>
</li>
<li>
<details>
<summary>NPCs</summary>
<ul>
<li><a href="NPCs Overview.html">NPCs Overview</a></li>
<li><a href="Command Baton.html">Command Baton</a></li>
<li><a href="Courier Routing Slips.html">Courier Routing Slips</a></li>
<li><a href="Rations.html">Rations</a></li>
</ul>
</details>
</li>
<li>
<details>
<summary>NPC Types</summary>
<ul>
<li><a href="CIV Craftsman.html">CIV Craftsman</a></li>
<li><a href="CIV Farmer.html">CIV Farmer</a></li>
<li><a href="CIV Fisherman.html">CIV Fisherman</a></li>
<li><a href="CIV Lumberjack.html">CIV Lumberjack</a></li>
<li><a href="CIV Miner.html">CIV Miner</a></li>
<li><a href="CIV Researcher.html">CIV Researcher</a></li>
<li><a href="Courier.html">Courier</a></li>
<li><a href="Footsoldier.html">Footsoldier</a></li>
</ul>
</details>
</li>
<li>
<details>
<summary>Vehicles</summary>
<ul>
<li><a href="Vehicles Overview.html">Vehicles Overview</a></li>
<li><a href="Vehicle Missile Types.html">Vehicle Missile Types</a></li>
<li><a href="Vehicle Upgrades.html">Vehicle Upgrades</a></li>
<li><a href="Vehicle Armor.html">Vehicle Armor</a></li>
</ul>
</details>
</li>
<li>
<details>
<summary>Vehicle Types</summary>
<ul>
<li><a href="Catapult.html">Catapult</a></li>
</ul>
</details>
</li>
<li>
<details>
<summary>Civics</summary>
<ul>
<li><a href="Civics Overview.html">Civics Overview</a></li>
<li><a href="Fish Farm.html">Fish Farm</a></li>
<li><a href="Ink Farm.html">Ink Farm</a></li>
</ul>
</details>
</li>
<li>
<details>
<summary>Gates</summary>
<ul>
<li><a href="Gates Overview.html">Gates Overview</a></li>
</ul>
</details>
</li>
<li>
<details>
<summary>Machines</summary>
<ul>
<li><a href="Machines Overview.html">Machines Overview</a></li>
</ul>
</details>
</li>
<li>
<details>
<summary>Structures</summary>
<ul>
<li><a href="Structures Overview.html">Structures Overview</a></li>
<li><a href="Template Examples.html">Template Examples</a></li>
<li><a href="Templates Details.html">Templates Details</a></li>
</ul>
</details>
</li>
<li>
<details>
<summary>Reinforced Blocks</summary>
<ul>
<li><a href="Reinforced Blocks.html">Reinforced Blocks</a></li>
</ul>
</details>
</li>
<li>
<details>
<summary>Plugins</summary>
<ul>
<li><a href="BuildCraft Plugin.html">BuildCraft Plugin</a></li>
<li><a href="NEI Plugin.html">NEI Plugin</a></li>
</ul>
</details>
</li>
</ul>
<div class="editNav"></div>
</div>
<div id="wikiBox">
<table id="wikiBoxTable" cellspacing="0">
<tbody>
<tr>
<td id="topLeftGradient"></td>
<td id="topGradient"></td>
<td id="topRightGradient"></td>
</tr>
<tr>
<td id="leftGradient"></td>
<td id="centerCell">
<div class="contentBox">
<div class="innerContentBox">
<div class="ws-menu-bar WikiControls WikispacesContent WikispacesBs">
<span class="PageTitle"><a href="Structures Weights and Values.html">Structures Weights and Values</a></span>
</div>
<div class="commentContainer">
<div class="commentSubject">
<div class="wiki" id="content_view" style="display: block;">
<blockquote style="max-width: 80%; font-style: oblique; background-color: LightYellow"><hr/><small><strong>Editor's Note (2023):</strong> You are reading an archive from 2014. This wiki concerns the Minecraft mod Ancient Warfare, version 1. Neither this wiki nor this version of the mod are being updated. If you are looking for the sequel, Ancient Warfare 2, visit <a href="https://www.curseforge.com/minecraft/mc-mods/ancient-warfare-2">CurseForge</a>. If you are looking for the indie game series, visit <a href="https://jnigames.com/">JNI Games</a>. If you are looking for <em style="font-style: normal">Ancient Warfare</em> the magazine, visit <a href="https://www.karwansaraypublishers.com/en-us/pages/ancient-warfare">Karwansaray Publishers</a>.</small><hr/></blockquote>
<h1 id="toc0"><a name="World Gen Structure Selection"></a><u>World Gen Structure Selection</u></h1>
 When the Ancient Warfare structure system validates an area to place a template on during world generation, it still needs to select the appropriate template for the area. Templates can be give all kinds of selection options as seen <a class="wiki_link" href="Validation%20Parameters.html">here</a>. Here's a brief overview of the template selection process:<br />
(RandomChance, RandomRange, and SearchRadius refer to the values from the config file of those names.)<br />
<br />
<ol><li><span style="line-height: 1.5;">Load biome list.</span></li><li><span style="line-height: 1.5;">Load templates. For each biome a template can spawn in, insert it into that biomes template list.</span></li><li><span style="line-height: 1.5;">During world generation for a chunk, first check the random chance/range values. Roll a number between 0 and RandomRange. If the value is less than RandomChance, continue to step 4. Otherwise, nothing is generated in this chunk...recheck next chunk (restart at step 3 on next chunk generation)</span></li><li><span style="line-height: 1.5;">Select a random block in the chunk on the X and Z planes. Lookup the biome for this single block -- this is the 'biome' that the template is spawning in (even if it crosses other biomes, only the single block position is checked!).</span></li><li><span style="line-height: 1.5;">Check the generated structure map, pooling entries for any structure spawned within SearchRadius of the generating chunk. Count up the clusterValue for each structure that was found. Remaining cluster value = MaxClusterValue - found value</span></li><li><span style="line-height: 1.5;">Pull up list of templates for the chosen spawn-biome. Remove any previously generated unique structures from this list. Remove any structures that do not match the dimension being spawned in. Remove any structure whose cluster value is &gt; the remaining cluster value. Remove any templates that have duplicates already generated within their minDuplicateDistance range. If the list is empty after this step, nothing is spawned, continue at step 3 for the next generating chunk.</span></li><li><span style="line-height: 1.5;">For each template left in the list, validate the chosen spawn position vs. the templates validation settings. For most validation types this is a simple operation of finding the top solid (non plant) block, and comparing this block vs. the templates list of target blocks. For water/sky/underground templates, a quick check for water/air/ground depth is also made to ensure the template has even a chance of validating (harbor types validate vs 2 blocks, one in the front for ground, one in the rear for water). Any templates that do not pass the initial validation step (due to non-matching target blocks, water depth, possible underground depth, etc) are removed from the list of spawnable structures. If the list is empty after this step, nothing is spawned, continue at step 3 for the next generating chunk.</span></li><li><span style="line-height: 1.5;">Count up the weight value for each remaining template. Do a weighted selection from the remaining templates. If the total remaining weight found is 500, and a particular template has a weight of 30, that template would have a 30 out of 500 (or 6%) chance of being chosen for the next step. A single template is selected at this step to proceed on to full validation.</span></li><li><span style="line-height: 1.5;">Validation begins by selecting a spawning height (varies by validation type), and a selecting a facing orientation (random roll).</span></li><li><span style="line-height: 1.5;">The previously-generated structure map is queried for any nearby structures (SearchRadius + current template size) for potentially intersecting structures. Any nearby structures are tested via bb-intersect test. If the current structure would intersect anything, it is rejected, and generation would proceed at step 3 with the next generating chunk.</span></li><li><span style="line-height: 1.5;">The structure chosen will now undergo full validation for its chosen validation settings. The templates validator will proceed to check along the borders/edges of a structure for leveling and clearing height-differences, any value found greater than the parameter specified in the templates validation settings will cause immediate rejection. Some validation types will at this point check additional parameters -- water/underwater/island will check water depth of the area. Any blocks found within the template bounds or directly below where the template will be generated that do not match the templates 'target blocks' list will also cause immediate rejection.</span></li></ol>
    </div>
</div>
</div>
<div class="commentColumn WikispacesStream">
<div class="WikispacesContent WikispacesBs">
<div class="commentList"></div>
</div>
</div>
</div>
</div>
<div id="sentinel" style="clear:both"></div>
</td>
<td id="rightGradient"></td>
</tr>
<tr>
<td id="bottomLeftGradient"></td>
<td id="bottomGradient"></td>
<td id="bottomRightGradient"></td>
</tr>
<tr>
<td class="footer" colspan="3">
<div class="WikiFooterNav WikiElement">
<s><a>Help</a></s> · <s><a>About</a></s> · <s><a>Blog</a></s> · <s><a>Pricing</a></s> · <s><a>Privacy</a></s> · <s><a>Terms</a></s> · <strong><s><a>Support</a></s></strong> · <strong><s><a>Upgrade</a></s></strong>
</div>
<div class="WikiLicense WikiElement">Portions not contributed by visitors are Copyright 2014 Tangient LLC</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</body>
</html>
